<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="toy.recipit.mapper.CommonMapper">

    <select id="getCommonDetailCodes" parameterType="string" resultType="toy.recipit.mapper.vo.CommonCodeVo">
        SELECT
            GROUP_CODE      AS groupCode,
            CODE            AS code,
            CODE_NAME       AS codeName,
            NOTE_1          AS note1,
            NOTE_2          AS note2,
            NOTE_3          AS note3,
            NOTE_4          AS note4
        FROM CM_DETAIL_CODE
        WHERE GROUP_CODE = #{groupCode}
          AND USE_YN = 'Y'
        ORDER BY SORT_SEQUENCE ASC
    </select>

    <select id="getCommonDetailCodeByIngredientGroupCode" parameterType="map" resultType="toy.recipit.mapper.vo.CommonCodeVo">
        SELECT
        g.GROUP_CODE      AS groupCode,
        g.GROUP_CODE_NAME AS groupName,
        d.CODE            AS code,
        d.CODE_NAME       AS codeName,
        d.NOTE_1          AS note1,
        d.NOTE_2          AS note2,
        d.NOTE_3          AS note3,
        d.NOTE_4          AS note4
        FROM CM_DETAIL_CODE d
        JOIN CM_GROUP_CODE g
        ON g.GROUP_CODE = d.GROUP_CODE
        WHERE d.GROUP_CODE IN
        <foreach collection="groupCodes" item="groupCode" open="(" separator="," close=")">
            #{groupCode}
        </foreach>
        AND d.USE_YN = 'Y'
        ORDER BY g.GROUP_CODE, d.SORT_SEQUENCE
    </select>
</mapper>
